<!DOCTYPE html>
<html>

<body>

    <h1>My First Heading</h1>
    <p>My first paragraph.</p>

    <script src="../dist/api.js"></script>
    <script>
        debugger;
        document.addEventListener("DOMContentLoaded", function () {
            var api = new GeotabApi({
                credentials: {
                    userName: 'stevehansen@geotab.com',
                    password: '0v2016KiaSoul!',
                    database: 'g560'
                },
                path: 'my.geotab.com'
            });

            console.log(api);

            api.authenticate()
                .then(result => {
                    return result;
                })
                .then(loginResult => {
                    console.log(loginResult);

                    api.call("Get", { typeName: "Device", resultsLimit: 10 })
                        .then(result => {
                            return result;
                        })
                        .then(devices => {
                            console.log(devices);
                        })
                        .catch(ex => {
                            console.log(ex);
                        });
                })
                .catch(ex => {
                    console.log(ex);
                });
        });
    </script>
</body>

</html>