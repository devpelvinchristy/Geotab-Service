const GeotabApi = require('../lib/api');

var api = new GeotabApi({
    credentials: {
        userName: 'stevehansen@geotab.com',
        password: '0v2016KiaSoul!',
        database: 'g560'
    },
    path: 'my.geotab.com'
});

console.log(api);

api.authenticate()
    .then(result => {
        return result;
    })
    .then(loginResult => {
        console.log(loginResult);

        api.call("Get", { typeName: "Device", resultsLimit: 10 })
            .then(result => {
                return result;
            })
            .then(devices => {
                console.log(devices);
            })
            .catch(ex => {
                console.log(ex);
            });
    })
    .catch(ex => {
        console.log(ex);
    });
